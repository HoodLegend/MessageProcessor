import{l as $,c as C,o as n,w as i,a as u,b as e,u as p,g as D,f as l,h as c,S as f,e as d,j as M,p as N,q as A,t as o,F,m as V,n as T,W as y}from"./app-BtehNc4U.js";import{_ as B}from"./AuthenticatedLayout-88JTsq9f.js";import"./ApplicationLogo-DE4CGfNq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DigitalClock-BK5F7RZ3.js";const U={class:"py-12"},Y={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},j={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},E={class:"p-6 text-gray-900"},K={class:"flex justify-between items-center mb-6"},P={class:"mb-6 flex space-x-4"},W={class:"flex items-end"},I=["disabled"],L=["disabled"],O={key:0,class:"mb-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded"},q={key:1,class:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},z={class:"overflow-x-auto"},R={class:"min-w-full divide-y divide-gray-200"},X={class:"bg-white divide-y divide-gray-200"},Z={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},G={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},H={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},J={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Q={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ee={class:"px-6 py-4 whitespace-nowrap"},te={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},se={key:2,class:"text-center py-8 text-gray-500"},de={__name:"Messages",props:{data:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})}},setup(g){const a=$(""),m=t=>{if(!t||t.length<14)return t;const s=t.substring(0,4),r=t.substring(4,6),_=t.substring(6,8),v=t.substring(8,10),k=t.substring(10,12),S=t.substring(12,14);return`${s}-${r}-${_} ${v}:${k}:${S}`},b=t=>t?(parseInt(t)/100).toLocaleString("en-US",{style:"currency",currency:"ZMW"}):"0.00",h=t=>({XNN:"bg-red-100 text-red-800",OK:"bg-green-100 text-green-800",PEN:"bg-yellow-100 text-yellow-800"})[t]||"bg-gray-100 text-gray-800",x=()=>{y.get(route("messages.index"),{date:a.value},{preserveState:!0,preserveScroll:!0})},w=()=>{a.value="",y.get(route("messages.index"),{},{preserveState:!0,preserveScroll:!0})};return(t,s)=>(n(),C(B,null,{default:i(()=>[u(p(D),{title:"Messages"}),e("div",U,[e("div",Y,[e("div",j,[e("div",E,[e("div",K,[s[2]||(s[2]=e("h2",{class:"text-2xl font-bold"},"Message Parser",-1)),u(p(f),{href:t.route("messages.upload"),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},{default:i(()=>s[1]||(s[1]=[d(" Upload File ")])),_:1,__:[1]},8,["href"])]),e("div",P,[e("div",null,[s[3]||(s[3]=e("label",{class:"block text-sm font-medium text-gray-700"},"Filter by Date (YYYYMMDD)",-1)),M(e("input",{"onUpdate:modelValue":s[0]||(s[0]=r=>a.value=r),type:"text",placeholder:"20100417",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",onKeyup:N(x,["enter"])},null,544),[[A,a.value]])]),e("div",W,[e("button",{onClick:x,disabled:!a.value,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"}," Filter ",8,I),e("button",{onClick:w,disabled:!a.value,class:"ml-2 bg-red-500 hover:bg-red-400 text-gray-800 font-bold py-2 px-4 rounded"}," Clear ",8,L)])]),t.$page.props.flash.success?(n(),l("div",O,[s[4]||(s[4]=e("strong",null,"Success!",-1)),d(" "+o(t.$page.props.flash.success.message)+" ",1),s[5]||(s[5]=e("br",null,null,-1)),d("Processed "+o(t.$page.props.flash.success.count)+" messages from "+o(t.$page.props.flash.success.filename),1)])):c("",!0),t.$page.props.flash.error?(n(),l("div",q,[s[6]||(s[6]=e("strong",null,"Error!",-1)),d(" "+o(t.$page.props.flash.error),1)])):c("",!0),e("div",z,[e("table",R,[s[8]||(s[8]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Transaction ID "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Timestamp "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Amount "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Reference "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Service "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",X,[(n(!0),l(F,null,V(g.data,r=>(n(),l("tr",{key:r.message_id},[e("td",Z,o(r.message_id.substring(0,8))+"... ",1),e("td",G,o(m(r.timestamp)),1),e("td",H,o(b(r.amount)),1),e("td",J,o(r.reference),1),e("td",Q,o(r.message_type),1),e("td",ee,[e("span",{class:T([h(r.status),"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},o(r.status),3)]),e("td",te,[u(p(f),{href:t.route("messages.show",r.message_id),class:"text-indigo-600 hover:text-indigo-900"},{default:i(()=>s[7]||(s[7]=[d(" View Details ")])),_:2,__:[7]},1032,["href"])])]))),128))])])]),g.data.length===0?(n(),l("div",se," No messages found. Upload a file to get started. ")):c("",!0)])])])])]),_:1}))}};export{de as default};
