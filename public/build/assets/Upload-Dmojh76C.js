import{l as n,c as B,o as d,w as g,a as x,b as e,u as b,g as C,f as m,h as f,S as F,e as p,d as u,n as D,t as v,W as T}from"./app-CHgcZ8QT.js";import{_ as S}from"./AuthenticatedLayout-DnXwPAgM.js";import"./ApplicationLogo-DEduqvEg.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DigitalClock-BCSa_deT.js";const V={class:"py-12"},z={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},N={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},j={class:"p-6 text-gray-900"},U={class:"flex justify-between items-center mb-6"},E={class:"mb-6"},H={class:"space-y-1 text-center"},I={class:"flex text-sm text-gray-600"},L={for:"file",class:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500"},P={key:0,class:"mt-3 p-3 bg-gray-50 rounded-lg"},A={class:"flex items-center"},O={class:"ml-3"},R={class:"text-sm font-medium text-gray-900"},W={class:"text-sm text-gray-500"},$={class:"flex items-center justify-end"},G=["disabled"],K={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},X={key:0,class:"mt-6"},te={__name:"Upload",setup(q){const o=n(null),i=n(!1),a=n(!1),c=n(null),h=s=>{const t=s.target.files[0];t&&(o.value=t)},w=s=>{i.value=!1;const t=s.dataTransfer.files;if(t.length>0){const l=t[0];if(y(l)){o.value=l;const r=new DataTransfer;r.items.add(l),c.value.files=r.files}else alert("Please select a valid file type (.txt, .log, .dat)")}},y=s=>{const t=["text/plain","application/octet-stream"],l=[".txt",".log",".dat"];return t.includes(s.type)||l.some(r=>s.name.toLowerCase().endsWith(r))},k=()=>{o.value=null,c.value.value=""},_=s=>{if(s===0)return"0 Bytes";const t=1024,l=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,r)).toFixed(2))+" "+l[r]},M=()=>{if(!o.value)return;a.value=!0;const s=new FormData;s.append("file",o.value),T.post(route("messages.store"),s,{forceFormData:!0,onFinish:()=>{a.value=!1},onError:()=>{a.value=!1}})};return(s,t)=>(d(),B(S,null,{default:g(()=>[x(b(C),{title:"Upload Messages"}),e("div",V,[e("div",z,[e("div",N,[e("div",j,[e("div",U,[t[3]||(t[3]=e("h2",{class:"text-2xl font-bold"},"Upload Message File",-1)),x(b(F),{href:s.route("messages.index"),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},{default:g(()=>t[2]||(t[2]=[p(" Back to Messages ")])),_:1,__:[2]},8,["href"])]),t[13]||(t[13]=e("div",{class:"mb-6"},[e("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},[e("h3",{class:"text-lg font-medium text-blue-900 mb-2"},"File Format Information"),e("p",{class:"text-blue-700 mb-2"},"Upload files containing fixed-width messages with the following structure:"),e("div",{class:"bg-white p-3 rounded border font-mono text-sm"}," 201008170000000000000004500039367306 20100417VODS2R8MMKSB 2010061705035500INTERNET BIS XNN "),e("div",{class:"mt-2 text-sm text-blue-600"},[e("strong",null,"Fields:"),p(" Timestamp (14) + Amount (10) + Reference (17) + Date (8) + Code (15) + Transaction Date (14) + Service (10) + Provider (8) + Status (3) ")])])],-1)),e("form",{onSubmit:u(M,["prevent"]),enctype:"multipart/form-data"},[e("div",E,[t[10]||(t[10]=e("label",{for:"file",class:"block text-sm font-medium text-gray-700 mb-2"}," Select Message File ",-1)),e("div",{class:D(["mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md hover:border-gray-400 transition-colors",{"border-blue-400 bg-blue-50":i.value}]),onDrop:u(w,["prevent"]),onDragover:t[0]||(t[0]=u(l=>i.value=!0,["prevent"])),onDragleave:t[1]||(t[1]=u(l=>i.value=!1,["prevent"]))},[e("div",H,[t[6]||(t[6]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},[e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),e("div",I,[e("label",L,[t[4]||(t[4]=e("span",null,"Upload a file",-1)),e("input",{id:"file",ref_key:"fileInput",ref:c,name:"file",type:"file",class:"sr-only",accept:".txt,.log,.dat",onChange:h,required:""},null,544)]),t[5]||(t[5]=e("p",{class:"pl-1"},"or drag and drop",-1))]),t[7]||(t[7]=e("p",{class:"text-xs text-gray-500"}," TXT, LOG, DAT files up to 10MB ",-1))])],34),o.value?(d(),m("div",P,[e("div",A,[t[9]||(t[9]=e("svg",{class:"h-8 w-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e("div",O,[e("p",R,v(o.value.name),1),e("p",W,v(_(o.value.size)),1)]),e("button",{onClick:k,type:"button",class:"ml-auto text-red-600 hover:text-red-800"},t[8]||(t[8]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])):f("",!0)]),e("div",$,[e("button",{type:"submit",disabled:!o.value||a.value,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50 disabled:cursor-not-allowed flex items-center"},[a.value?(d(),m("svg",K,t[11]||(t[11]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):f("",!0),p(" "+v(a.value?"Processing...":"Upload and Process"),1)],8,G)])],32),a.value?(d(),m("div",X,t[12]||(t[12]=[e("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},[e("div",{class:"flex items-center"},[e("svg",{class:"animate-spin h-5 w-5 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),e("span",{class:"ml-2 text-blue-800"},"Processing file... This may take a few moments for large files.")])],-1)]))):f("",!0)])])])])]),_:1}))}};export{te as default};
